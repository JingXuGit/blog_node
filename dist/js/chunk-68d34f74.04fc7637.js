(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68d34f74"],{"01ec":function(e,t,i){e.exports=i.p+"img/pc2.609ae5b7.png"},"0472":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-drawer",{ref:"drawer",attrs:{title:"我是标题",visible:e.drawer,"with-header":!1,direction:"ltr","before-close":e.handleClose,modal:!0},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticStyle:{padding:"20px 10px",display:"flex","align-items":"center","justify-content":"space-around"}},[i("div",{staticClass:"el-icon-sunny",staticStyle:{color:"#fff","font-size":"24px"}}),i("div",{staticClass:"el-icon-bell",staticStyle:{color:"#fff","font-size":"22px"}})]),i("div",{staticStyle:{background:"#f5f5f5",width:"70px",height:"70px","border-radius":"50%",margin:"10px auto"}},[i("el-avatar",{attrs:{size:70,src:e.avatarImgUrl}})],1),i("h2",{staticClass:"title",staticStyle:{color:"#fff","font-size":"16px!important"}},[e._v(e._s(e.username))]),i("div",{staticClass:"menu_list"},[i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex,router:""},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"/"}},[i("i",{staticClass:"el-icon-s-home"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),i("el-menu-item",{attrs:{index:"/notes"}},[i("i",{staticClass:"el-icon-notebook-2"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("文章")])]),i("el-menu-item",{attrs:{index:"/resume"}},[i("i",{staticClass:"el-icon-document"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("简历")])]),i("el-menu-item",{attrs:{index:"/essays"}},[i("i",{staticClass:"el-icon-chat-line-square"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("随笔")])]),i("el-menu-item",{attrs:{index:"/guestbook"}},[i("i",{staticClass:"el-icon-message"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("留言")])])],1)],1),i("div",{staticStyle:{margin:"0 20px"}},[null==e.role?i("el-button",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"danger"},on:{click:e.showLoginDialog}},[e._v("登录")]):i("el-button",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"danger"},on:{click:e.logout}},[e._v("退出登录")])],1)]),i("dialog-login",{attrs:{dialogVisible:e.dialogVisible},on:{close:e.closeDialog}})],1)},a=[],r=i("1364"),n={components:{"dialog-login":r["a"]},props:{drawerFlag:Boolean},data:function(){return{activeIndex:"/",drawer:!1,dialogVisible:!1,role:null==JSON.parse(this.$store.state.blog.user)?null:JSON.parse(this.$store.state.blog.user).role,username:null==JSON.parse(this.$store.state.blog.user)?null:JSON.parse(this.$store.state.blog.user).username,avatarImgUrl:null==JSON.parse(this.$store.state.blog.user)?null:JSON.parse(this.$store.state.blog.user).avatarImgUrl}},watch:{drawerFlag:function(e){this.drawer=e},$route:function(){this.fetchNavData()},"$store.state.blog.user":function(e){null!=e?(this.role=JSON.parse(e).role,this.username=JSON.parse(e).username,this.avatarImgUrl=JSON.parse(e).avatarImgUrl):(this.role=null,this.username="JingXu",this.avatarImgUrl=null)}},created:function(){this.fetchNavData()},methods:{handleSelect:function(e){this.activeIndex=e,this.$refs.drawer.closeDrawer()},fetchNavData:function(){for(var e=this.$route.path,t=this.$router.options.routes,i="",s=0;s<t.length;s++)if(t[s].type===e){i=t[s].type;break}"/"==i?(this.flag=!0,this.activeIndex="/"):"/resume"==i?(this.flag=!1,this.activeIndex=i):(this.flag=!0,this.activeIndex=i)},getImgUrl:function(e){return i("7584")("./"+e)},handleClose:function(e){this.$emit("changeDrawer",!1),e()},showLoginDialog:function(){this.$refs.drawer.closeDrawer(),this.dialogVisible=!0},closeDialog:function(e){this.dialogVisible=e},logout:function(){this.$store.dispatch("setAccount",null),window.localStorage.clear(),this.$refs.drawer.closeDrawer(),this.$message.success({message:"您已退出登录",duration:"1000"})}}},o=n,l=i("2877"),c=Object(l["a"])(o,s,a,!1,null,"211b9ee6",null);t["a"]=c.exports},"114b":function(e,t,i){e.exports=i.p+"img/banner3.b6688fd3.jpg"},1364:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"contents"},[i("el-dialog",{attrs:{visible:e.loginVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.loginVisible=t}}},[i("div",{staticStyle:{position:"absolute",left:"0px",top:"0"}},[i("div",{staticClass:"icon_menu height"},[i("span",{staticClass:"el-icon-back",staticStyle:{"font-size":"24px"},on:{click:e.closeLoginDialog}})])]),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between",margin:"20px 10px 0"}},[i("h2",[e._v("欢迎回来...")]),i("div",{staticStyle:{color:"#ec558c"},on:{click:e.toRegist}},[e._v("去注册")])]),i("div",{staticStyle:{"text-align":"left","font-size":"16px",margin:"10px 0 20px 10px","font-weight":"600"}},[e._v("请先填写以下信息进行登录")]),i("el-form",{ref:"loginForm",staticClass:"forms",staticStyle:{margin:"0px 20px 0 10px","padding-top":"20px","user-select":"none"},attrs:{model:e.loginForm,"label-width":"0px",rules:e.rules}},[i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{type:"password",autocomplete:"off",size:"mini",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.login}},[e._v("登 录")])],1)],1)],1),i("el-dialog",{attrs:{visible:e.registVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.registVisible=t}}},[i("div",{staticStyle:{position:"absolute",left:"0px",top:"0"}},[i("div",{staticClass:"icon_menu height"},[i("span",{staticClass:"el-icon-back",staticStyle:{"font-size":"24px"},on:{click:e.closeRegistDialog}})])]),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between",margin:"20px 10px 0"}},[i("h2",[e._v("欢迎你...")]),i("div",{staticStyle:{color:"#ec558c"},on:{click:e.toLogin}},[e._v("去登录")])]),i("div",{staticStyle:{"text-align":"left","font-size":"16px",margin:"10px 0 20px 10px","font-weight":"600"}},[e._v("请先填写以下信息进行注册")]),i("el-form",{ref:"registForm",staticClass:"forms",staticStyle:{margin:"0px 20px 0 10px","padding-top":"20px","user-select":"none"},attrs:{model:e.registForm,"label-width":"0px",rules:e.rules}},[i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},model:{value:e.registForm.email,callback:function(t){e.$set(e.registForm,"email",t)},expression:"registForm.email"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{type:"password",autocomplete:"off",size:"mini",placeholder:"请输入密码"},model:{value:e.registForm.password,callback:function(t){e.$set(e.registForm,"password",t)},expression:"registForm.password"}})],1),i("el-form-item",{attrs:{label:"昵称",prop:"username"}},[i("el-input",{attrs:{autocomplete:"off",size:"mini",placeholder:"请输入昵称"},model:{value:e.registForm.username,callback:function(t){e.$set(e.registForm,"username",t)},expression:"registForm.username"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.regist}},[e._v("注册")])],1)],1)],1)],1)},a=[],r=(i("96cf"),i("1da1")),n=i("b775"),o=function(e){var t=e;return n["a"].post("api/login",t)},l=function(e){var t=e;return n["a"].post("api/register",t)},c={data:function(){return{loginVisible:!1,registVisible:!1,rules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:7,message:"长度在 2 到 7 个字符",trigger:"blur"}]},loginForm:{email:"",password:""},registForm:{email:"",password:"",username:""}}},props:{dialogVisible:Boolean},watch:{dialogVisible:function(e){this.loginVisible=e}},created:function(){},methods:{login:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(i){var s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return s={email:e.loginForm.email,password:e.loginForm.password},t.next=4,o(s);case 4:if(a=t.sent,r=a.data,200==r.status){t.next=8;break}return t.abrupt("return",e.$message.error(r.message));case 8:e.$message.success({message:r.message,duration:"1000"}),window.localStorage.setItem("user",JSON.stringify(r.data)),e.$store.dispatch("setAccount",JSON.stringify(r.data)),e.loginVisible=!1,e.$emit("close",!1),e.loginForm={email:"",password:""},t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},regist:function(){var e=this;this.$refs.registForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(i){var s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return s={email:e.registForm.email,password:e.registForm.password,username:e.registForm.username,avatarImgUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},t.next=4,l(s);case 4:if(a=t.sent,r=a.data,200==r.status){t.next=8;break}return t.abrupt("return",e.$message.error(r.message));case 8:console.log(r),e.$message.success({message:r.message,duration:"2000"}),e.loginForm.email=e.registForm.email,e.loginVisible=!0,e.registVisible=!1,e.registForm={email:"",password:"",username:""},t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},closeLoginDialog:function(){this.loginVisible=!1,this.$emit("close",!1)},closeRegistDialog:function(){this.registVisible=!1,this.$emit("close",!1)},toRegist:function(){this.$refs.loginForm.clearValidate(),this.loginVisible=!1,this.registVisible=!0},toLogin:function(){this.$refs.registForm.clearValidate(),this.registVisible=!1,this.loginVisible=!0}}},p=c,u=i("2877"),g=Object(u["a"])(p,s,a,!1,null,"99e4aab4",null);t["a"]=g.exports},"1b30":function(e,t,i){e.exports=i.p+"img/pc3.fff60e13.png"},"253b":function(e,t,i){e.exports=i.p+"img/app1.cd3d8739.jpg"},"2d35":function(e,t,i){e.exports=i.p+"img/pc8.ec89d2d6.png"},3379:function(e,t,i){e.exports=i.p+"img/pc6.7499c83b.png"},"3f1d":function(e,t,i){e.exports=i.p+"img/app2.e034fb67.jpg"},4125:function(e,t,i){e.exports=i.p+"img/pc9.d5ce7284.png"},"45ef":function(e,t,i){e.exports=i.p+"img/article1.0cd88892.webp"},"4b75":function(e,t,i){e.exports=i.p+"img/not_found.f7c78dbd.gif"},"53a8":function(e,t,i){e.exports=i.p+"img/pc4.1cec03fc.png"},"6b25":function(e,t,i){e.exports=i.p+"img/page1.69cf4869.jpg"},7584:function(e,t,i){var s={"./app1.jpg":"253b","./app2.jpg":"3f1d","./app3.jpg":"f12f","./app4.jpg":"bf27","./article1.webp":"45ef","./avatar.jpg":"92ef","./banner1.jpg":"d15f","./banner2.jpg":"db49","./banner3.jpg":"114b","./banner4.jpg":"8973","./logo.png":"9d64","./not_found.gif":"4b75","./page1.jpg":"6b25","./pc1.jpg":"809e","./pc10.png":"eac9","./pc2.png":"01ec","./pc3.png":"1b30","./pc4.png":"53a8","./pc5.png":"bb15","./pc6.png":"3379","./pc7.png":"db4b","./pc8.png":"2d35","./pc9.png":"4125"};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id="7584"},"809e":function(e,t,i){e.exports=i.p+"img/pc1.82a9dc93.jpg"},8973:function(e,t,i){e.exports=i.p+"img/banner4.13ebef26.jpg"},"92ef":function(e,t,i){e.exports=i.p+"img/avatar.c5bbfb32.jpg"},"9d64":function(e,t,i){e.exports=i.p+"img/logo.ca76fbb4.png"},bb15:function(e,t,i){e.exports=i.p+"img/pc5.bb94f5d3.png"},bf27:function(e,t,i){e.exports=i.p+"img/app4.8a2a1418.jpg"},c4f0:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[e.flag?i("div",{staticClass:"header",style:e.opacityStyle},[i("div",{staticStyle:{"max-width":"1420px",margin:"0 auto"}},[i("el-row",{staticClass:"row"},[i("div",{staticClass:"hidden-lg-and-up",staticStyle:{position:"absolute",left:"0px"}},[i("div",{staticClass:"icon_menu height"},["/detail"==e.$route.path?i("span",{staticClass:"el-icon-back",staticStyle:{"font-size":"24px"},on:{click:e.navigateToNotes}}):e._e()])]),i("el-col",{staticClass:"height",attrs:{xs:24,sm:21,md:21,lg:4,xl:4}},[i("span",{staticClass:"title"},[e._v("JingXu")])]),i("el-col",{staticClass:"hidden-md-and-down height",attrs:{lg:16,xl:16}},[i("el-menu",{staticClass:"el-menu-top",attrs:{"default-active":e.activeIndex,mode:"horizontal",router:""},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"/"}},[e._v("博客首页")]),i("el-menu-item",{attrs:{index:"/notes"}},[e._v("文章")]),i("el-menu-item",{attrs:{index:"/resume"}},[e._v("简历")]),i("el-menu-item",{attrs:{index:"/essays"}},[e._v("随笔")]),i("el-menu-item",{attrs:{index:"/guestbook"}},[e._v("留言")]),"admin"==e.role?i("el-menu-item",{attrs:{index:"/editor"}},[e._v("编辑文章")]):e._e()],1)],1),null==e.avatarImgUrl?i("el-col",{staticClass:"height hidden-md-and-down",attrs:{lg:4,xl:4}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showLoginDialog}},[e._v("登录")])],1):i("el-col",{staticClass:"height hidden-md-and-down",attrs:{lg:4,xl:4}},[i("el-dropdown",{staticStyle:{height:"50px"},attrs:{trigger:"click",placement:"bottom"},on:{click:e.logout}},[i("div",{staticStyle:{height:"100%",display:"flex","align-items":"center",cursor:"pointer"}},[i("el-avatar",{attrs:{size:"medium",src:e.avatarImgUrl}}),i("span",{staticStyle:{"margin-left":"10px","font-size":"12px","user-select":"none"}},[e._v(e._s(e.username))])],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("li",{on:{click:e.logout}},[i("el-dropdown-item",{attrs:{icon:"el-icon-error"}},[e._v("退出登录")])],1)])],1)],1),i("div",{staticClass:"hidden-lg-and-up",staticStyle:{position:"absolute",right:"0px"}},[i("div",{staticClass:"icon_menu height"},[i("span",{staticClass:"el-icon-menu",staticStyle:{"font-size":"24px"},on:{click:function(t){e.drawer=!0}}})])])],1)],1)]):e._e(),i("drawer-biew",{attrs:{drawerFlag:e.drawer},on:{changeDrawer:e.drawerChange}}),i("dialog-login",{attrs:{dialogVisible:e.dialogVisible},on:{close:e.closeDialog}})],1)},a=[],r=(i("ac1f"),i("5319"),i("0472")),n=i("1364"),o={components:{"drawer-biew":r["a"],"dialog-login":n["a"]},data:function(){return{activeIndex:"/",flag:!0,showAbs:!0,opacityStyle:{opacity:1,background:"#fff"},drawer:!1,dialogVisible:!1,avatarImgUrl:null==JSON.parse(this.$store.state.blog.user)?null:JSON.parse(this.$store.state.blog.user).avatarImgUrl,username:null==JSON.parse(this.$store.state.blog.user)?null:JSON.parse(this.$store.state.blog.user).username,role:null==JSON.parse(this.$store.state.blog.user)?null:JSON.parse(this.$store.state.blog.user).role}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},unmounted:function(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route:function(){this.fetchNavData()},"$store.state.blog.user":function(e){null!=e?(this.avatarImgUrl=JSON.parse(e).avatarImgUrl,this.username=JSON.parse(e).username,this.role=JSON.parse(e).role):(this.avatarImgUrl=null,this.username=null,this.role=null)}},created:function(){this.fetchNavData()},methods:{navigateToNotes:function(){this.$router.push("/notes")},handleScroll:function(){if("/"==this.$route.path){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if(e>60){var t=e/1;t=t>1?1:t,this.opacityStyle={opacity:t,background:"#fff"},this.showAbs=!1}else this.opacityStyle={opacity:1,background:"#fff"},this.showAbs=!0}},fetchNavData:function(){for(var e=this.$route.path,t=this.$router.options.routes,i="",s=0;s<t.length;s++)if(t[s].type===e){i=t[s].type;break}"/"==i?(this.flag=!0,this.activeIndex="/"):"/resume"==i?(this.flag=!1,this.activeIndex=i):(this.flag=!0,this.activeIndex=i)},getImgUrl:function(e){return i("7584")("./"+e)},handleSelect:function(e){this.activeIndex=e},drawerChange:function(e){this.drawer=e},showLoginDialog:function(){this.dialogVisible=!0},closeDialog:function(e){this.dialogVisible=e},logout:function(){this.$store.dispatch("setAccount",null),window.localStorage.clear(),"/editor"==this.$route.path&&this.$router.replace("/"),this.$message.success({message:"您已退出登录",duration:"1000"})}}},l=o,c=i("2877"),p=Object(c["a"])(l,s,a,!1,null,"8924979c",null);t["default"]=p.exports},d15f:function(e,t,i){e.exports=i.p+"img/banner1.08d86c58.jpg"},db49:function(e,t,i){e.exports=i.p+"img/banner2.01ab6a6a.jpg"},db4b:function(e,t,i){e.exports=i.p+"img/pc7.e8c40067.png"},eac9:function(e,t,i){e.exports=i.p+"img/pc10.b2585966.png"},f12f:function(e,t,i){e.exports=i.p+"img/app3.a9d8058e.jpg"}}]);